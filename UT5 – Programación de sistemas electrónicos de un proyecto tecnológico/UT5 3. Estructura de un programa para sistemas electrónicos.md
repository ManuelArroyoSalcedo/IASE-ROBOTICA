# UT5 – Programación de sistemas/circuitos electrónicos de un proyecto tecnológico

---

## Índice de contenidos

1. Conceptos básicos de microcontroladores
2. Uso del entorno de programación de sistemas electrónicos
3. Estructura de un programa para sistemas electrónicos
4. Fundamentos del lenguaje de programación
5. Programación de la comunicación con la placa
6. Análisis del funcionamiento de programas de sistemas electrónicos


---

## 3. Estructura de un programa para sistemas electrónicos

Los programas destinados a sistemas electrónicos no funcionan como los programas tradicionales de escritorio.  
En lugar de ejecutarse una vez y finalizar, están diseñados para **funcionar de manera continua mientras el sistema esté alimentado**.

Por este motivo, el lenguaje y el entorno de programación establecen una **estructura concreta del programa**, que define cuándo y cómo se ejecuta cada parte del código.

---

### Índice del apartado

1. [Modelo de ejecución de un programa](#31-modelo-de-ejecución-de-un-programa)  
2. [Código de inicialización](#32-código-de-inicialización)  
3. [Código de ejecución continua](#33-código-de-ejecución-continua)  
4. [Relación entre `setup()` y `loop()`](#34-relación-entre-setup-y-loop)  
5. [Ausencia de un bloque de finalización](#35-ausencia-de-un-bloque-de-finalización)  
6. [Importancia de la estructura del programa](#36-importancia-de-la-estructura-del-programa)

---

### 3.1. Modelo de ejecución de un programa

En un sistema electrónico programable, el programa sigue este comportamiento general:

1. El sistema se enciende o se reinicia.
2. Se ejecuta una fase de **inicialización**.
3. Se ejecuta de forma repetitiva la fase principal del programa.
4. El programa continúa ejecutándose mientras haya alimentación.

No existe, de forma general, una fase de finalización automática del programa.

### 3.2. Código de inicialización

El **código de inicialización** se ejecuta **una sola vez**, justo al comenzar el programa.

Su finalidad es preparar el sistema antes de comenzar el funcionamiento normal, por ejemplo:
- Configurar elementos del sistema.
- Inicializar variables.
- Preparar la comunicación con otros dispositivos.

En Arduino, este código se coloca dentro de la función `setup()`.

Ejemplo:

```cpp
void setup() {
  // Código que se ejecuta una sola vez al inicio
}
```

Todo el código incluido en esta función se ejecuta únicamente al arrancar o reiniciar el sistema.

### 3.3. Código de ejecución continua

El código de ejecución continua se ejecuta de forma repetitiva mientras el sistema esté encendido.

Esta parte del programa es la encargada de:

- Leer información.

- Tomar decisiones.

- Actuar en consecuencia.


En Arduino, este código se coloca dentro de la función `loop()`.

Ejemplo:
```cpp
void loop() {
  // Código que se ejecuta continuamente
}
```

Cuando el microcontrolador termina de ejecutar el contenido de `loop()`, vuelve a ejecutarlo desde el principio, una y otra vez.

### 3.4. Relación entre `setup()` y `loop()`

La estructura básica de un programa para sistemas electrónicos queda definida por estas dos funciones:

- `setup()` → se ejecuta **una sola vez**.
- `loop()` → se ejecuta **de forma continua**.

Un programa mínimo completo tendría la siguiente estructura:

```cpp

void setup() {
  // Inicialización del sistema
}

void loop() {
  // Funcionamiento continuo del sistema
}
```

Esta estructura es obligatoria en los programas desarrollados con el entorno de Arduino.

### 3.5. Ausencia de un bloque de finalización

A diferencia de otros programas, en los sistemas electrónicos **no existe un bloque de código que se ejecute automáticamente al finalizar el programa**.

El programa solo se detiene cuando:

- Se corta la alimentación.
- Se reinicia el sistema.
- Se vuelve a cargar un nuevo programa.

Por este motivo, el diseño del código debe tener en cuenta que el sistema puede estar funcionando durante largos periodos de tiempo.

### 3.6. Importancia de la estructura del programa

Comprender la estructura del programa es fundamental para:

- Escribir programas correctos.
- Evitar errores de funcionamiento.
- Entender por qué el sistema se comporta de una determinada manera.
- Diseñar programas eficientes y estables.

Esta estructura será la base sobre la que se construyan los programas que interactúan con sensores y actuadores en los siguientes apartados.
